# clicdata-python
A package to work with your ClicData account natively in Python.

Currently only supports the Client Credentials or Basic authentication methods. 
* See how to generate your Client ID and Client Secret for Client Credentials here: 
 https://app.clicdata.com/help/apidocumentation/api-auth-oauth-client
* See how to generate your Client ID for Basic here: 
 https://app.clicdata.com/help/apidocumentation/api-auth-basic

Right now this is an early alpha version with limited type checking and error handling. As development progresses more handling will be built in and more API functionality will be incorporated.

*Not officially affiliated with ClicData*

**Example Use:**
Returns list of all dashboards on your account with additional meta data
```
from clicdata-api-wrapper.session as session
from clicdata-api-wrapper.dashboard as cdash

def main():
    client_id = "yourclientidhere"
    client_secret = "yourclientsecrethere"
    c = session.Session(client_id=client_id, client_secret=client_secret)

    # Pass your session object as the first parameter to each function.
    dashboards = cdash.get_dashboard(c)
    return dashboards


if __name__ == "__main__":
    main()
```

## Currently working:

## Classes

### Session
* **Parameters**:
  * **auth_method** : Session - accepts session class as input to authenticate
  * **client_id** : str - client_id generated by ClicData, required for all authentication methods
  * *(Optional)* **client_secret** : str - client_secret generated by ClicData, required for **Authentication Code** and **Client Credentials**
  * *(Optional)* **username** : str - username as a string, required only for **Basic**
  * *(Optional)* **password** : str - password as a string, required only for **Basic**

Required to initialize this class to feed into functions included in this library. This class with authenticate your connection and re-authorize when necessary.

Client Credentials Example:
```
s = Session(auth_method='client_credentials', client_id='youridhere', client_secret='yoursecrethere')
get_data(s)
```
*returns dataframe containing list of data on your account*

Basic Auth Example:
```
s = Session(auth_method='basic', client_id='youridhere', username='yourplaintextusername', password='yourplaintextpassword')
get_data(s)
```
*returns dataframe containing list of data on your account*

## Modules

### Data Functions

#### get_data()
* **Parameters**:
  * **session** : Session - accepts session class as input to authenticate
  * *(Optional)* **rec_id** : int - RecId of the data you want to retrieve
  * **output** : str - Output format, either df or dict
* **Enpoints**:
  * List Data: GET /data
  * Retrieve Data: GET /data/{id}
* **Usage**:
  * If no rec_id is provided lists all data on account, if rec_id is provided, retrieves data from specified data set.

#### get_data_history()
* **Parameters**:
  * **session** : Session - accepts session class as input to authenticate
  * **rec_id** : int - RecId of the data you want to retrieve
  * *(Optional)* **ver_id** : int - Version ID of the data you want to retrieve from your data set
  * **output** : str - Output format, either df or dict
* **Enpoints**:
  * List Data History: GET /data/{id}/versions
  * Retrieve Historical Data: GET /data/{id}/v/{ver}
* **Usage**:
  * If no ver_id is provided lists all stored data versions, if ver_id is provided, retrieves data from specified data set version. Must have Data History enabled on data set to use.

#### create_data()
* **Parameters**:
  * **session** : Session - accepts session class as input to authenticate
  * **name** : str - Name of data table created in ClicData. Must be unique to account.
  * *(Optional)* **desc** : str - Long form description attached to table in ClicData.
  * **cols** : dict - Column name as key, data type as value.
* **Enpoints**:
  * Create New Custom Table: POST /data
* **Usage**:
  * Creates and empty custom data table on your ClicData account, which can then be appended to

#### append_data()
* **Parameters**:
  * **session** : Session - accepts session class as input to authenticate
  * **rec_id** : int - id of your data in ClicData
  * **data** : pandas.Dataframe - df containing the data you want to append.
* **Enpoints**:
  * Append Data: POST /data/{id}/row
* **Usage**:
  * Append your data to an existing dataset
  
#### static_send_data()
* **Parameters**:
  * **session** : Session - accepts session class as input to authenticate
  * **name** : str - Name of data set to create, must be unique to your account
  * *(Optional)* **desc** : str - Optional, long-form details about your data
  * **data** : pandas.Dataframe - Data to upload
* **Usage**:
  * Uses create_data() to create a static data set, then uses append_data() to add the input data to it. Note: Input must be a dataframe.
  
#### delete_data()
* **Parameters**:
  * **session** : Session - accepts session class as input to authenticate
  * **rec_id** :  int - id of your data in ClicData
  * **filters** : dict - dictionary with column names as keys and values as values specifying which rows to delete
  * *(Optional)* **multiple_rows** : str - accepts 'all' or 'first', defaults to 'all'
* **Endpoints**:
  * Delete Data: DELETE /data/{id}/row
* **Usage**:
  * Deletes rows from a dataset on your account based on the filters passed.

### Dashboard Functions

* To Be Added

### Account Functions

* To Be Added

## To Do:

### Planned Methods:

* **Data:**
  * Update Data: PUT /data/{id}/row
* **Account:**
  * User Activity: GET /account/activity/users
  * Dashboard Activity: GET /account/activity/dashboards
* **Schedule:**
  * List Schedules: GET /schedule
  * Schedule Details: GET /schedule/{id}
  * Trigger Schedule: POST /schedule/{id}/trigger
* **Team:**
  * List Teams: GET /team
  * Create Team: POST /team
  * Update Team: PUT /team/{id}
  * Delete Team: DELETE /team/{id}
  * Add User To Team: POST /team/{id}/user
  * Remove User From Team: DELETE /team/{id}/user
  * Add/Update Team Paramter: POST /team/{id}/parameter
  * Remove Team Paramter: DELETE /team/{id}/parameter
* **User:**
  * List Users: GET /user
  * Create new User: POST /user
  * Get User Details: GET /user/{id}
  * Update User: PUT /user/{id}
  * Delete User: DELETE /user/{id}
  * Set User Password: PUT /user/{id}/password
  
  
  # Resources:
  
  * **ClicData API Documentation:** https://app.clicdata.com/help/apidocumentation/api-docs
  
